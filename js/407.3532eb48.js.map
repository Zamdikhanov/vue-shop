{"version":3,"file":"js/407.3532eb48.js","mappings":"6GAIAA,EAAQ,EAAU,CAACC,EAAKC,KACpB,MAAMC,EAASF,EAAIG,WAAaH,EAChC,IAAK,MAAOI,EAAKC,KAAQJ,EACrBC,EAAOE,GAAOC,EAElB,OAAOH,CAAM,C,2cCHjB,MAAMI,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O,ymBCFA,MAAMA,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,Q,kBCLO,SAASC,IACZ,OAAOC,CACX,C,gjCCmEA,MAAMA,EAAWD,KAEX,UAAEE,EAAS,YAAEC,EAAW,wBAAEC,EAAuB,wBAAEC,EAAuB,eAAEC,IAC9EC,EAAAA,EAAAA,IAAO,SAELC,GAAoBC,EAAAA,EAAAA,KAAS,IACxBP,EAAUQ,MAAMC,KAAKC,IACxB,MAAMC,EAAmBZ,EAASa,MAAMC,GAAYA,EAAQC,KAAOJ,EAASI,KAC5E,OAAIH,EAC8B,WAA1BA,EAAiBI,KACV,IAAKJ,EAAkBK,kBAAmBN,EAASO,OAEnD,IACAN,EACHK,kBAAmBN,EAASO,MAC5BC,yBAA0BR,EAASS,WAIxC,CAAEL,GAAI,OAAQM,MAAO,qBAAsB,MAIpDC,GAAYd,EAAAA,EAAAA,KAAS,IAChBD,EAAkBE,MAAMc,QAAO,CAACC,EAAKC,IACjCC,KAAKC,MAA8D,KAAvDH,EAAMC,EAAGG,cAAcnB,MAAQgB,EAAGR,oBAA4B,KAClF,KAGP,SAASY,EAAYf,GACjB,GAAqB,iBAAjBA,EAAQE,KAAyB,CACjC,MAAMc,EAAUhB,EAAQiB,SAASlB,MAC5BiB,GAAYA,EAAQhB,QAAQC,KAAOD,EAAQK,2BAEhD,GAAIW,EACA,MAAO,YAAcA,EAAQhB,QAAQkB,KAE7C,CACA,MAAO,YAAclB,EAAQkB,KACjC,CAEA,SAASC,EAAoBnB,EAASoB,GAClC,MAAMJ,EAAUhB,EAAQiB,SAASlB,MAC5BiB,GAAYA,EAAQhB,QAAQC,KAAOD,EAAQK,2BAEhD,IAAKW,EAAS,MAAO,CAAC,EACtB,MAAMK,EAAsBL,EAAQM,WAAWvB,MAC1CwB,GAASA,EAAKC,OAASJ,IAC1BK,YACIC,EAAoB1B,EAAQ2B,qBAAqB5B,MAClD6B,GAAWA,EAAOC,iBAAmBT,IACxCU,OACIC,EAAYL,EAAkB3B,MAC/BgC,GAAcA,EAAUN,cAAgBJ,IAE7C,OAAOU,CACX,C,uoDC1HA,MAAM,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://vue-shop/./node_modules/vue-loader/dist/exportHelper.js","webpack://vue-shop/./src/components/AppButton.vue","webpack://vue-shop/./src/modules/basket/components/BasketCountInput.vue","webpack://vue-shop/./src/modules/basket/services/api.js","webpack://vue-shop/./src/modules/basket/views/BasketView.vue","webpack://vue-shop/./src/modules/basket/views/BasketView.vue?23b0"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","import script from \"./AppButton.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./AppButton.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./AppButton.vue?vue&type=style&index=0&id=d97a6200&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-d97a6200\"]])\n\nexport default __exports__","import script from \"./BasketCountInput.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./BasketCountInput.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./BasketCountInput.vue?vue&type=style&index=0&id=5bdd38ea&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-5bdd38ea\"]])\n\nexport default __exports__","import products from '../../../assets/products.json';\nimport brands from '../../../assets/brands.json';\n\nexport function getProducts() {\n    return products;\n}\n\nexport function getBrands() {\n    return brands;\n}\n","<template>\r\n    <div v-if=\"purchases.length\" class=\"purchases\">\r\n        <div class=\"purchases__list\">\r\n            <h1 class=\"purchases__list-title\">Корзина</h1>\r\n            <div v-for=\"product in purchasedProducts\" :key=\"product.id\" class=\"basket-row\">\r\n                <div class=\"image-block\">\r\n                    <img\r\n                        :src=\"getSrcImage(product)\"\r\n                        :alt=\"product.title\"\r\n                        class=\"image-block__image\"\r\n                    />\r\n                </div>\r\n                <div class=\"description-block\">\r\n                    <div class=\"basket-row__subtitle\">Наименовние</div>\r\n                    <div class=\"basket-row__product-title\">{{ product.title }}</div>\r\n                    <div v-if=\"product.type === 'configurable'\" class=\"basket-row__product-price\">\r\n                        Цвет <span>{{ getProductAttribute(product, 'color').label }}</span>\r\n                    </div>\r\n                    <div v-if=\"product.type === 'configurable'\" class=\"basket-row__product-size\">\r\n                        Размер <span>{{ getProductAttribute(product, 'size').label }}</span>\r\n                    </div>\r\n                </div>\r\n                <div class=\"basket-row__counter\">\r\n                    <BasketCountInput\r\n                        class=\"basket-row__counter-input\"\r\n                        :count-value=\"product.totalProductCount\"\r\n                        @increase-value=\"\r\n                            increaseQuantityProduct(product.id, product.selectedProductVariantId)\r\n                        \"\r\n                        @decrease-value=\"\r\n                            decreaseQuantityProduct(product.id, product.selectedProductVariantId)\r\n                        \"\r\n                    />\r\n                </div>\r\n                <div class=\"basket-row__price\">\r\n                    <div class=\"basket-row__subtitle basket-row__subtitle--right\">Стоимость</div>\r\n                    <div class=\"basket-row__price-value\">\r\n                        {{ product.regular_price?.value }} {{ product.regular_price?.currency }}\r\n                    </div>\r\n                    <AppButton\r\n                        :outline=\"true\"\r\n                        class=\"basket-row__delete-btn\"\r\n                        @click=\"deletePurchase(product.id, product.selectedProductVariantId)\"\r\n                    >\r\n                        Удалить\r\n                    </AppButton>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"purchases__total-container\">\r\n            <div class=\"purchases__total-title\">Итого</div>\r\n            <div class=\"purchases__total-counts\">\r\n                Общее количество товаров: {{ totalCounts }} шт.\r\n            </div>\r\n            <div class=\"purchases__total-cost\">{{ totalCost }} USD</div>\r\n            <AppButton class=\"purchases__total-button\">Заказать</AppButton>\r\n        </div>\r\n    </div>\r\n\r\n    <div v-else class=\"not-purchases__container\">\r\n        <h1 class=\"not-purchases__title\">В корзине пока пусто</h1>\r\n        <div>Загляните на главную, чтобы выбрать товары</div>\r\n        <router-link class=\"not-purchases__link\" to=\"/\">Перейти на главную</router-link>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { inject, computed } from 'vue';\r\nimport AppButton from '@/components/AppButton.vue';\r\nimport BasketCountInput from '../components/BasketCountInput.vue';\r\nimport { getProducts } from '../services/api.js';\r\n\r\nconst products = getProducts();\r\n\r\nconst { purchases, totalCounts, increaseQuantityProduct, decreaseQuantityProduct, deletePurchase } =\r\n    inject('state');\r\n\r\nconst purchasedProducts = computed(() => {\r\n    return purchases.value.map((purchase) => {\r\n        const purchasedProduct = products.find((product) => product.id === purchase.id);\r\n        if (purchasedProduct) {\r\n            if (purchasedProduct.type === 'simple') {\r\n                return { ...purchasedProduct, totalProductCount: purchase.count };\r\n            } else {\r\n                return {\r\n                    ...purchasedProduct,\r\n                    totalProductCount: purchase.count,\r\n                    selectedProductVariantId: purchase.variantId\r\n                };\r\n            }\r\n        }\r\n        return { id: 'null', title: 'Продукт закончился' };\r\n    });\r\n});\r\n\r\nconst totalCost = computed(() => {\r\n    return purchasedProducts.value.reduce((acc, el) => {\r\n        return Math.round((acc + el.regular_price.value * el.totalProductCount) * 100) / 100;\r\n    }, 0);\r\n});\r\n\r\nfunction getSrcImage(product) {\r\n    if (product.type === 'configurable') {\r\n        const variant = product.variants.find(\r\n            (variant) => variant.product.id === product.selectedProductVariantId\r\n        );\r\n        if (variant) {\r\n            return '/vue-shop' + variant.product.image;\r\n        }\r\n    }\r\n    return '/vue-shop' + product.image;\r\n}\r\n\r\nfunction getProductAttribute(product, attributeName) {\r\n    const variant = product.variants.find(\r\n        (variant) => variant.product.id === product.selectedProductVariantId\r\n    );\r\n    if (!variant) return {};\r\n    const attributeValueIndex = variant.attributes.find(\r\n        (attr) => attr.code === attributeName\r\n    ).value_index;\r\n    const productAttributes = product.configurable_options.find(\r\n        (option) => option.attribute_code === attributeName\r\n    ).values;\r\n    const attribute = productAttributes.find(\r\n        (attribute) => attribute.value_index === attributeValueIndex\r\n    );\r\n    return attribute;\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.purchases {\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 15px;\r\n}\r\n.purchases__list {\r\n    flex: 1 1 auto;\r\n    padding: 20px 10px;\r\n    border: 1px solid var(--border-color);\r\n    border-radius: var(--border-radius);\r\n    background-color: #fff;\r\n}\r\n.purchases__list-title {\r\n    font-size: var(--font-size-lg);\r\n    font-weight: 700;\r\n    margin-bottom: 15px;\r\n}\r\n.basket-row {\r\n    display: grid;\r\n    grid-template-areas:\r\n        'image description'\r\n        'counter counter'\r\n        'price price';\r\n    grid-template-columns: 105px 1fr;\r\n    gap: 20px 10px;\r\n    padding: 10px;\r\n    border-bottom: 1px solid var(--border-color);\r\n    margin-bottom: 20px;\r\n    &:last-of-type {\r\n        border-bottom: none;\r\n        margin-bottom: 0px;\r\n    }\r\n}\r\n.image-block {\r\n    grid-area: image;\r\n    align-self: start;\r\n    display: block;\r\n    position: relative;\r\n    width: 100px;\r\n    padding-top: 100px;\r\n    text-decoration: none;\r\n}\r\n.image-block__image {\r\n    display: block;\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    height: 100%;\r\n    width: 100%;\r\n    object-fit: contain;\r\n    object-position: center;\r\n}\r\n.description-block {\r\n    grid-area: description;\r\n    display: grid;\r\n    grid-template-rows: auto 1fr auto auto;\r\n}\r\n.basket-row__subtitle {\r\n    color: var(--text-color-light);\r\n    font-size: var(--font-size-sm);\r\n    margin-bottom: 8px;\r\n    &--right {\r\n        text-align: end;\r\n    }\r\n}\r\n.basket-row__product-title {\r\n    font-weight: 700;\r\n    margin-bottom: 10px;\r\n}\r\n.basket-row__product-price,\r\n.basket-row__product-size {\r\n    color: var(--text-color-light);\r\n    span {\r\n        color: var(--text-color);\r\n    }\r\n}\r\n.basket-row__counter {\r\n    grid-area: counter;\r\n    display: flex;\r\n    align-items: end;\r\n}\r\n.basket-row__counter-input {\r\n    width: 100%;\r\n}\r\n.basket-row__price {\r\n    grid-area: price;\r\n    display: grid;\r\n    grid-template-columns: 1fr;\r\n}\r\n.basket-row__price-value {\r\n    font-weight: 700;\r\n    text-align: end;\r\n    margin-bottom: 10px;\r\n}\r\n.basket-row__delete-btn {\r\n    height: 50px;\r\n    min-width: auto;\r\n    width: 100%;\r\n    align-self: flex-end;\r\n}\r\n.purchases__total-container {\r\n    flex: 0 0 auto;\r\n    height: fit-content;\r\n    padding: 20px 10px 20px;\r\n    border: 1px solid var(--border-color);\r\n    border-radius: var(--border-radius);\r\n    background-color: #fff;\r\n}\r\n.purchases__total-title {\r\n    font-size: var(--font-size-lg);\r\n    font-weight: 700;\r\n    margin-bottom: 20px;\r\n}\r\n.purchases__total-counts {\r\n    font-size: var(--font-size);\r\n    color: var(--text-color-light);\r\n    margin-bottom: 10px;\r\n}\r\n.purchases__total-cost {\r\n    font-size: var(--font-size-lg);\r\n    font-weight: 700;\r\n    color: var(--primary-color);\r\n    text-align: end;\r\n    margin-bottom: 25px;\r\n}\r\n\r\n.not-purchases__container {\r\n    margin: 20px auto;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    align-items: center;\r\n    gap: 15px;\r\n    text-align: center;\r\n    .not-purchases__title {\r\n        font-size: var(--font-size-lg);\r\n        font-weight: 700;\r\n    }\r\n    .not-purchases__link {\r\n        font-weight: 700;\r\n    }\r\n}\r\n\r\n@media (min-width: 768px) {\r\n    .basket-row {\r\n        grid-template-areas:\r\n            'image description description '\r\n            'image counter price';\r\n        grid-template-columns: 110px 1fr 1fr;\r\n    }\r\n    .purchases__total-container {\r\n        padding: 20px 20px 20px 10px;\r\n    }\r\n    .purchases__total-button {\r\n        width: max-content;\r\n        min-width: 150px;\r\n        margin: 0 0 0 auto;\r\n    }\r\n}\r\n\r\n@media (min-width: 1400px) {\r\n    .purchases {\r\n        flex-direction: row;\r\n        gap: 30px;\r\n    }\r\n    .purchases__list {\r\n        flex: 1 1 auto;\r\n        padding: 30px;\r\n    }\r\n    .purchases__list-title {\r\n        margin-bottom: 20px;\r\n    }\r\n    .basket-row {\r\n        grid-template-areas: 'image description counter price';\r\n        grid-template-columns: 100px 1fr 150px 150px;\r\n        gap: 10px 20px;\r\n        padding: 20px 10px;\r\n    }\r\n    .description-block {\r\n        display: grid;\r\n        grid-template-rows: auto 1fr auto auto;\r\n    }\r\n    .basket-row__product-title {\r\n        margin-bottom: 20px;\r\n    }\r\n    .basket-row__price-value {\r\n        font-weight: 700;\r\n        text-align: end;\r\n        margin-bottom: 10px;\r\n    }\r\n    .purchases__total-container {\r\n        flex: 0 0 350px;\r\n        height: fit-content;\r\n        padding: 30px 40px 40px;\r\n        position: sticky;\r\n        top: 20px;\r\n    }\r\n    .purchases__total-title {\r\n        margin-bottom: 20px;\r\n    }\r\n    .purchases__total-cost {\r\n        margin-bottom: 25px;\r\n    }\r\n}\r\n</style>\r\n","import script from \"./BasketView.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./BasketView.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./BasketView.vue?vue&type=style&index=0&id=04fc1aed&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-04fc1aed\"]])\n\nexport default __exports__"],"names":["exports","sfc","props","target","__vccOpts","key","val","__exports__","getProducts","products","purchases","totalCounts","increaseQuantityProduct","decreaseQuantityProduct","deletePurchase","inject","purchasedProducts","computed","value","map","purchase","purchasedProduct","find","product","id","type","totalProductCount","count","selectedProductVariantId","variantId","title","totalCost","reduce","acc","el","Math","round","regular_price","getSrcImage","variant","variants","image","getProductAttribute","attributeName","attributeValueIndex","attributes","attr","code","value_index","productAttributes","configurable_options","option","attribute_code","values","attribute"],"sourceRoot":""}