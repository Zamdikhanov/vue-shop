{"version":3,"file":"js/378.485ebf34.js","mappings":"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","sources":["webpack://vue-shop/./node_modules/vue-loader/dist/exportHelper.js","webpack://vue-shop/./src/components/AppButton.vue","webpack://vue-shop/./src/components/AppCheckbox.vue","webpack://vue-shop/./src/components/AppCheckbox.vue?f148","webpack://vue-shop/./src/modules/catalog/components/CatalogColorButton.vue","webpack://vue-shop/./src/modules/catalog/components/CatalogCard.vue","webpack://vue-shop/./src/modules/catalog/components/CatalogCard.vue?4a74","webpack://vue-shop/./src/components/icons/IconArrowRight.vue","webpack://vue-shop/./src/components/icons/IconArrowRight.vue?da52","webpack://vue-shop/./src/modules/catalog/services/api.js","webpack://vue-shop/./src/modules/catalog/views/CatalogView.vue","webpack://vue-shop/./src/modules/catalog/views/CatalogView.vue?7b20"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","import script from \"./AppButton.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./AppButton.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./AppButton.vue?vue&type=style&index=0&id=d97a6200&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-d97a6200\"]])\n\nexport default __exports__","<template>\n    <label class=\"custom-checkbox\">\n        <input :checked=\"isChecked\" type=\"checkbox\" :value=\"value\" @change=\"onHandleClick\" />\n        <span>{{ label }}</span>\n    </label>\n</template>\n\n<script setup>\nimport { computed, ref } from 'vue';\n\nconst props = defineProps({\n    modelValue: { type: [Boolean, Array], default: false },\n    label: { type: String, default: '' },\n    value: { type: [String, Number], default: 'on' },\n    trueValue: { type: Boolean, default: true },\n    falseValue: { type: Boolean, default: false }\n});\n\nconst value = ref(props.modelValue);\n\nconst $emit = defineEmits(['update:modelValue']);\n\nconst isChecked = computed(() => {\n    if (props.modelValue instanceof Array) {\n        return props.modelValue.includes(props.value);\n    }\n    return props.modelValue === props.trueValue;\n});\n\nfunction onHandleClick(event) {\n    let isChecked = event.target.checked;\n    if (props.modelValue instanceof Array) {\n        let newValue = [...props.modelValue];\n        if (isChecked) {\n            newValue.push(props.value);\n        } else {\n            newValue.splice(newValue.indexOf(props.value), 1);\n        }\n        $emit('update:modelValue', newValue);\n    } else {\n        $emit('update:modelValue', isChecked ? props.trueValue : props.falseValue);\n    }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.custom-checkbox {\n    cursor: pointer;\n}\n.custom-checkbox > span {\n    display: inline-flex;\n    align-items: center;\n    user-select: none;\n}\n\n/* создание в label псевдоэлемента before со следующими стилями */\n.custom-checkbox > span::before {\n    content: '';\n    display: inline-block;\n    width: 1em;\n    height: 1em;\n    flex-shrink: 0;\n    flex-grow: 0;\n    border: 1px solid var(--border-color);\n    border-radius: var(--border-radius);\n    margin-right: 0.5em;\n    background-repeat: no-repeat;\n    background-position: center center;\n    background-size: 50% 50%;\n}\n\n/* стили при наведении курсора на checkbox */\n.custom-checkbox > input:not(:disabled):not(:checked) + span:hover::before {\n    border-color: var(--border-hover-color);\n}\n\n/* стили для активного чекбокса (при нажатии на него) */\n.custom-checkbox > input:not(:disabled):active + span::before {\n    background-color: var(--primary-dark-color);\n    border-color: var(--primary-dark-color);\n}\n\n/* стили для чекбокса, находящегося в фокусе и не находящегося в состоянии checked */\n.custom-checkbox > input:focus-visible:not(:checked) + span::before {\n    border-color: var(--primary-color);\n}\n\n/* стили для чекбокса, находящегося в состоянии checked */\n.custom-checkbox > input:checked + span::before {\n    border-color: var(--primary-color);\n    background-color: var(--primary-color);\n    background-image: url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8'%3e%3cpath fill='%23fff' d='M6.564.75l-3.59 3.612-1.538-1.55L0 4.26 2.974 7.25 8 2.193z'/%3e%3c/svg%3e\");\n}\n\n/* стили для чекбокса, находящегося в фокусе */\n.custom-checkbox > input:focus-visible + span::before {\n    box-shadow: var(--box-shadow);\n    border-color: var(--text-color);\n}\n.custom-checkbox > input:focus-visible + span {\n    color: #000;\n}\n/* стили для чекбокса, находящегося в состоянии disabled */\n.custom-checkbox > input:disabled + span::before {\n    background-color: var(--border-color);\n}\n</style>\n","import script from \"./AppCheckbox.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./AppCheckbox.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./AppCheckbox.vue?vue&type=style&index=0&id=42a05226&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-42a05226\"]])\n\nexport default __exports__","import script from \"./CatalogColorButton.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./CatalogColorButton.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./CatalogColorButton.vue?vue&type=style&index=0&id=d50fce76&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-d50fce76\"]])\n\nexport default __exports__","<template>\r\n    <div class=\"catalog-card\">\r\n        <div class=\"catalog-card__wrapper\">\r\n            <div class=\"catalog-card__image-block\">\r\n                <img class=\"image-block__image\" :src=\"srcImage\" alt=\"\" />\r\n            </div>\r\n\r\n            <div class=\"catalog-card__middle-block\">\r\n                <h3 class=\"middle-block__product-name\">{{ product.title }}</h3>\r\n                <div class=\"middle-block__price\">\r\n                    Цена:\r\n                    <span>\r\n                        {{ product.regular_price?.value }} {{ product.regular_price?.currency }}\r\n                    </span>\r\n                </div>\r\n                <div class=\"middle-block__brand-name\">\r\n                    Брэнд:\r\n                    <span>\r\n                        {{ brand.title }}\r\n                    </span>\r\n                </div>\r\n                <div class=\"middle-block__variants\">\r\n                    Варианты: {{ product.variants?.length ?? '1' }}\r\n                </div>\r\n\r\n                <div class=\"catalog-card__end-block\">\r\n                    <div v-if=\"colors\" class=\"end-block__color-container\">\r\n                        <CatalogColorButton\r\n                            v-for=\"currentColor in colors.values\"\r\n                            :key=\"currentColor.value_index\"\r\n                            :color=\"currentColor\"\r\n                            :is-active=\"selectedColorIndex === currentColor.value_index\"\r\n                            @click=\"changeColor(currentColor.value_index)\"\r\n                        />\r\n                    </div>\r\n                    <div v-if=\"sizes\" class=\"end-block__size-container\">\r\n                        <AppButton\r\n                            v-for=\"currentSize in sizes.values\"\r\n                            :key=\"currentSize.value_index\"\r\n                            class=\"end-block__size\"\r\n                            :button-type=\"\r\n                                selectedSizeIndex === currentSize.value_index ? '' : 'secondary'\r\n                            \"\r\n                            :outline=\"true\"\r\n                            @click=\"changeSize(currentSize.value_index)\"\r\n                        >\r\n                            {{ currentSize.label }}\r\n                        </AppButton>\r\n                    </div>\r\n                    <AppButton\r\n                        :button-type=\"isProductInBasket ? 'success' : ''\"\r\n                        class=\"end-block__basket-button\"\r\n                        @click=\"\r\n                            () => {\r\n                                !isProductInBasket && addProductToBasket();\r\n                            }\r\n                        \"\r\n                    >\r\n                        {{ isProductInBasket ? 'В корзине' : 'В корзину' }}\r\n                    </AppButton>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, toRaw, inject, onBeforeMount } from 'vue';\r\nimport AppButton from '../../../components/AppButton.vue';\r\nimport CatalogColorButton from './CatalogColorButton.vue';\r\n\r\nconst props = defineProps({\r\n    product: {\r\n        type: Object,\r\n        default: () => ({})\r\n    },\r\n    brand: {\r\n        type: Object,\r\n        default: () => ({})\r\n    }\r\n});\r\n\r\nconst { purchases, addPurchase } = inject('state');\r\n\r\nconst isProductInBasket = ref(false);\r\nconst selectedSizeIndex = ref(null);\r\nconst selectedColorIndex = ref(null);\r\nconst selectedVariantId = ref(null);\r\n\r\nconst colors = computed(() => {\r\n    if (props.product.configurable_options?.length) {\r\n        const idx = props.product.configurable_options.findIndex(\r\n            (el) => el.attribute_code === 'color'\r\n        );\r\n        if (idx >= 0) {\r\n            return props.product.configurable_options[idx];\r\n        }\r\n    }\r\n    return null;\r\n});\r\n\r\nconst sizes = computed(() => {\r\n    if (props.product.configurable_options?.length) {\r\n        const idx = props.product.configurable_options.findIndex(\r\n            (el) => el.attribute_code === 'size'\r\n        );\r\n        if (idx >= 0) {\r\n            return props.product.configurable_options[idx];\r\n        }\r\n    }\r\n    return null;\r\n});\r\n\r\nonBeforeMount(() => {\r\n    if (props.product.type === 'configurable') {\r\n        const purchase = purchases.value.find((purchase) => purchase.id === props.product.id);\r\n        if (purchase) {\r\n            const variant = props.product.variants.find(\r\n                (variant) => variant.product.id === purchase.variantId\r\n            );\r\n            selectedSizeIndex.value = variant.attributes.find(\r\n                (el) => el.code === 'size'\r\n            ).value_index;\r\n            selectedColorIndex.value = variant.attributes.find(\r\n                (el) => el.code === 'color'\r\n            ).value_index;\r\n            isProductInBasket.value = true;\r\n            selectedVariantId.value = purchase.variantId;\r\n        } else {\r\n            selectedSizeIndex.value = props.product.variants[0].attributes.find(\r\n                (el) => el.code === 'size'\r\n            ).value_index;\r\n            selectedColorIndex.value = props.product.variants[0].attributes.find(\r\n                (el) => el.code === 'color'\r\n            ).value_index;\r\n            selectedVariantId.value = props.product.variants[0].product.id;\r\n        }\r\n    } else {\r\n        setIsProductInBasket();\r\n    }\r\n});\r\n\r\nconst srcImage = computed(() => {\r\n    if (props.product.type === 'configurable') {\r\n        const variant = props.product.variants.find(\r\n            (el) => el.product.id === selectedVariantId.value\r\n        );\r\n        if (variant) {\r\n            return variant.product.image;\r\n        }\r\n    }\r\n    return props.product.image;\r\n});\r\n\r\nfunction setIsProductInBasket() {\r\n    if (props.product.type === 'simple') {\r\n        isProductInBasket.value = purchases.value.some((el) => el.id === props.product.id);\r\n    } else {\r\n        isProductInBasket.value = purchases.value.some(\r\n            (purchaseEl) =>\r\n                purchaseEl.id === props.product.id &&\r\n                purchaseEl.variantId === selectedVariantId.value\r\n        );\r\n    }\r\n}\r\n\r\nfunction addProductToBasket() {\r\n    let id = toRaw(props.product.id);\r\n    let variantId = toRaw(selectedVariantId.value);\r\n    addPurchase(id, variantId);\r\n    isProductInBasket.value = true;\r\n}\r\n\r\nfunction changeColor(colorIndex) {\r\n    const variant = props.product.variants.find((el) => {\r\n        return (\r\n            hasIndexInAttributes(el, 'color', colorIndex) &&\r\n            hasIndexInAttributes(el, 'size', selectedSizeIndex.value)\r\n        );\r\n    });\r\n    if (variant) {\r\n        selectedVariantId.value = variant.product.id;\r\n    } else {\r\n        const altVariant = props.product.variants.find((el) => {\r\n            return hasIndexInAttributes(el, 'color', colorIndex);\r\n        });\r\n        selectedSizeIndex.value = altVariant.attributes.find(\r\n            (el) => el.code === 'size'\r\n        ).value_index;\r\n        selectedVariantId.value = altVariant.product.id;\r\n    }\r\n    selectedColorIndex.value = colorIndex;\r\n    setIsProductInBasket();\r\n}\r\n\r\nfunction changeSize(sizeIndex) {\r\n    const variant = props.product.variants.find((el) => {\r\n        return (\r\n            hasIndexInAttributes(el, 'color', selectedColorIndex.value) &&\r\n            hasIndexInAttributes(el, 'size', sizeIndex)\r\n        );\r\n    });\r\n    if (variant) {\r\n        selectedVariantId.value = variant.product.id;\r\n    } else {\r\n        const altVariant = props.product.variants.find((el) => {\r\n            return hasIndexInAttributes(el, 'size', sizeIndex);\r\n        });\r\n        selectedColorIndex.value = altVariant.attributes.find(\r\n            (el) => el.code === 'color'\r\n        ).value_index;\r\n        selectedVariantId.value = altVariant.product.id;\r\n    }\r\n    selectedSizeIndex.value = sizeIndex;\r\n    setIsProductInBasket();\r\n}\r\n\r\nfunction hasIndexInAttributes(el, attr, idx) {\r\n    const attribute = el.attributes.find((el) => el.code === attr);\r\n    if (attribute) {\r\n        return attribute.value_index === idx;\r\n    }\r\n    return false;\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.catalog-card {\r\n    background-color: #fff;\r\n    border: 1px solid var(--border-color);\r\n    border-radius: var(--border-radius);\r\n    padding: 16px;\r\n}\r\n.catalog-card__wrapper {\r\n    position: relative;\r\n    display: grid;\r\n    grid-template-columns: 1fr;\r\n    grid-template-rows: auto 1fr;\r\n    height: 100%;\r\n}\r\n.catalog-card__image-block {\r\n    display: block;\r\n    position: relative;\r\n    height: fit-content;\r\n    width: 100%;\r\n    padding-top: 100%;\r\n    text-decoration: none;\r\n    margin-bottom: 15px;\r\n}\r\n.catalog-card__middle-block {\r\n    display: grid;\r\n    grid-template-rows: auto auto auto 1fr;\r\n}\r\n.image-block__image {\r\n    display: block;\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    height: 100%;\r\n    width: 100%;\r\n    object-fit: contain;\r\n    object-position: center;\r\n}\r\n.middle-block__product-name {\r\n    font-weight: 700;\r\n    margin-bottom: 1em;\r\n}\r\n.middle-block__brand-name {\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    justify-content: space-between;\r\n    margin-bottom: 15px;\r\n}\r\n.middle-block__price {\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    justify-content: space-between;\r\n    margin-bottom: 5px;\r\n    span {\r\n        font-weight: 700;\r\n        color: var(--primary-color);\r\n    }\r\n}\r\n.middle-block__variants {\r\n    display: none;\r\n    justify-content: center;\r\n    color: var(--text-color-light);\r\n    font-size: var(--font-size-sm);\r\n}\r\n.catalog-card__end-block {\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    justify-content: end;\r\n}\r\n.end-block__color-container {\r\n    display: flex;\r\n\r\n    flex-wrap: wrap;\r\n    gap: 10px;\r\n    margin-bottom: 10px;\r\n}\r\n\r\n.end-block__size-container {\r\n    display: flex;\r\n    gap: 10px;\r\n    margin-bottom: 10px;\r\n    flex-wrap: wrap;\r\n}\r\n.end-block__size {\r\n    display: flex;\r\n    padding: 2px 8px;\r\n    min-width: auto;\r\n    min-height: auto;\r\n    width: fit-content;\r\n    height: fit-content;\r\n}\r\n.end-block__basket-button {\r\n    margin-top: 15px;\r\n}\r\n\r\n@media (min-width: 1400px) {\r\n    .catalog-card {\r\n        padding: 16px;\r\n        position: relative;\r\n        &:hover {\r\n            .catalog-card__wrapper {\r\n                z-index: 1;\r\n                position: absolute;\r\n                top: 0;\r\n                left: 0;\r\n                right: 0;\r\n                height: fit-content;\r\n                box-shadow: 0px 0px 1px 1px var(--border-color), var(--box-shadow);\r\n                padding: 16px;\r\n                background-color: #fff;\r\n                border-radius: var(--border-radius);\r\n            }\r\n            .catalog-card__middle-block .middle-block__variants {\r\n                display: none;\r\n            }\r\n            .catalog-card__end-block {\r\n                display: flex;\r\n            }\r\n        }\r\n    }\r\n    .catalog-card__wrapper {\r\n        position: relative;\r\n    }\r\n    .middle-block__variants {\r\n        display: flex;\r\n    }\r\n    .catalog-card__end-block {\r\n        display: none;\r\n    }\r\n}\r\n</style>\r\n","import script from \"./CatalogCard.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./CatalogCard.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./CatalogCard.vue?vue&type=style&index=0&id=e9980a40&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-e9980a40\"]])\n\nexport default __exports__","<template>\r\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"currentColor\" class=\"w-6 h-6\">\r\n        <path\r\n            fill-rule=\"evenodd\"\r\n            d=\"M16.28 11.47a.75.75 0 010 1.06l-7.5 7.5a.75.75 0 01-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 011.06-1.06l7.5 7.5z\"\r\n            clip-rule=\"evenodd\"\r\n        />\r\n    </svg>\r\n</template>\r\n","import { render } from \"./IconArrowRight.vue?vue&type=template&id=6eadb051\"\nconst script = {}\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import products from '../../../assets/products.json';\nimport brands from '../../../assets/brands.json';\n\nexport function getProducts() {\n    return products;\n}\n\nexport function getBrands() {\n    return brands;\n}\n","<template>\n    <div class=\"catalog-page\">\n        <aside class=\"filters-container\">\n            <h3 class=\"filters-container__title\">Фильтровать по</h3>\n            <div class=\"filter\">\n                <div\n                    class=\"filter__title-block\"\n                    :class=\"{ 'filter__title-block--closed': !isShowFilters }\"\n                >\n                    <h3 class=\"filter__title\">Бренды</h3>\n                    <AppButton\n                        :outline=\"true\"\n                        button-type=\"secondary\"\n                        class=\"filter-button\"\n                        @click=\"toggleShowFilters\"\n                    >\n                        <IconArrowRight\n                            class=\"filter-icon\"\n                            :class=\"{ 'filter-icon--up': isShowFilters }\"\n                        />\n                    </AppButton>\n                </div>\n                <div class=\"filter__list\" :class=\"{ 'filter__list--hide': !isShowFilters }\">\n                    <AppCheckbox\n                        v-for=\"brand in brandsPlusAll\"\n                        :key=\"brand.id\"\n                        v-model=\"checkedBrands\"\n                        :value=\"brand.id?.toString()\"\n                        :label=\"brand.title\"\n                        @change=\"onSelectBrand\"\n                    />\n                </div>\n            </div>\n        </aside>\n\n        <div class=\"card-container\">\n            <h1 class=\"card-container__title\">Наш каталог</h1>\n            <div class=\"card-container__list\">\n                <CatalogCard\n                    v-for=\"product in filteredProducts\"\n                    :key=\"product.id\"\n                    :product=\"product\"\n                    :brand=\"getBrandFromId(product.brand)\"\n                />\n            </div>\n        </div>\n    </div>\n</template>\n\n<script setup>\nimport { computed, onBeforeMount, ref } from 'vue';\nimport AppCheckbox from '../../../components/AppCheckbox.vue';\nimport CatalogCard from '../components/CatalogCard.vue';\nimport IconArrowRight from '@/components/icons/IconArrowRight.vue';\n\nimport { getProducts, getBrands } from '../services/api.js';\nimport AppButton from '@/components/AppButton.vue';\n\nconst products = getProducts();\nconst brands = getBrands();\n\nconst filteredProducts = computed(() => {\n    if (checkedBrands.value[0] === 'AllId') return products;\n    return products.filter((el) => {\n        return checkedBrands.value.includes(el.brand?.toString());\n    });\n});\n\nconst brandsPlusAll = ref([]);\nconst checkedBrands = ref(['AllId']);\n\nonBeforeMount(() => {\n    brandsPlusAll.value = [{ id: 'AllId', title: 'Все' }, ...brands];\n});\n\nconst isShowFilters = ref(false);\n\nfunction toggleShowFilters() {\n    isShowFilters.value = !isShowFilters.value;\n}\n\nfunction getBrandFromId(id) {\n    return brands.find((el) => el.id === id);\n}\n\nfunction onSelectBrand() {\n    if (\n        checkedBrands.value.length > 1 &&\n        checkedBrands.value[checkedBrands.value.length - 1] === 'AllId'\n    ) {\n        checkedBrands.value = ['AllId'];\n    } else {\n        if (checkedBrands.value.length > 1 && checkedBrands.value.includes('AllId')) {\n            checkedBrands.value = checkedBrands.value.filter((el) => el !== 'AllId');\n        }\n    }\n    if (checkedBrands.value.length === 0) {\n        checkedBrands.value.push('AllId');\n    }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.catalog-page {\n    display: grid;\n    grid-template-columns: 1fr;\n    gap: 30px;\n    position: relative;\n}\n.filters-container {\n    display: flex;\n    flex-direction: column;\n    gap: 16px;\n    height: fit-content;\n}\n.card-container__title,\n.filters-container__title {\n    font-weight: 700;\n    font-size: var(--font-size);\n}\n.card-container__title {\n    margin-bottom: 16px;\n}\n.filter {\n    width: 100%;\n    padding: 16px;\n    background-color: #fff;\n    border: 1px solid var(--border-color);\n    border-radius: var(--border-radius);\n}\n.filter__title-block {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    gap: 8px;\n    font-weight: 700;\n    border-bottom: 1px solid var(--border-color);\n    padding-bottom: 16px;\n    margin-bottom: 16px;\n    &--closed {\n        padding-bottom: 0px;\n        margin-bottom: 0px;\n        border-bottom: none;\n    }\n}\n.filter-button {\n    width: fit-content;\n    height: fit-content;\n    min-width: auto;\n    min-height: auto;\n    padding: 5px;\n}\n.filter-icon {\n    height: 18px;\n    width: 18px;\n    transform: rotateZ(90deg);\n    transition: transform ease-in-out 0.3s;\n    &--up {\n        transform: rotateZ(-90deg);\n    }\n}\n.filter__list {\n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n    gap: 10px 30px;\n    &--hide {\n        display: none;\n    }\n}\n.card-container {\n    width: 100%;\n}\n.card-container__list {\n    display: grid;\n    grid-template-columns: repeat(2, 1fr);\n    gap: 10px;\n    width: 100%;\n}\n\n@media (min-width: 576px) {\n    .card-container__list {\n        grid-template-columns: repeat(3, 1fr);\n        gap: 10px;\n    }\n}\n\n@media (min-width: 992px) {\n    .card-container__list {\n        grid-template-columns: repeat(4, 1fr);\n        gap: 10px;\n    }\n}\n\n@media (min-width: 1400px) {\n    .catalog-page {\n        display: grid;\n        grid-template-columns: 248px 1fr;\n        gap: 30px;\n        position: relative;\n    }\n    .filters-container {\n        display: flex;\n        flex-direction: column;\n        gap: 16px;\n        position: sticky;\n        top: 20px;\n        height: fit-content;\n    }\n    .filter-button {\n        display: none;\n    }\n    .card-container__title,\n    .filters-container__title {\n        font-weight: 700;\n        font-size: var(--font-size);\n    }\n    .card-container__title {\n        margin-bottom: 16px;\n    }\n    .filter {\n        width: 100%;\n        padding: 16px;\n        background-color: #fff;\n        border: 1px solid var(--border-color);\n        border-radius: var(--border-radius);\n    }\n    .filter__title-block {\n        display: flex;\n        flex-direction: column;\n        gap: 8px;\n        font-weight: 700;\n        border-bottom: 1px solid var(--border-color);\n        padding-bottom: 16px;\n        margin-bottom: 16px;\n    }\n    .filter__list {\n        display: flex;\n        flex-direction: column;\n        gap: 10px;\n    }\n    .card-container {\n        width: 100%;\n    }\n    .card-container__list {\n        display: grid;\n        grid-template-columns: repeat(4, 1fr);\n        gap: 30px;\n        width: 100%;\n    }\n}\n</style>\n","import script from \"./CatalogView.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./CatalogView.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./CatalogView.vue?vue&type=style&index=0&id=381c5bbd&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-381c5bbd\"]])\n\nexport default __exports__"],"names":["exports","sfc","props","target","__vccOpts","key","val","__exports__","value","ref","modelValue","isChecked","computed","Array","includes","trueValue","onHandleClick","event","checked","newValue","push","splice","indexOf","$emit","falseValue","purchases","addPurchase","inject","isProductInBasket","selectedSizeIndex","selectedColorIndex","selectedVariantId","colors","product","configurable_options","length","idx","findIndex","el","attribute_code","sizes","onBeforeMount","type","purchase","find","id","variant","variants","variantId","attributes","code","value_index","setIsProductInBasket","srcImage","image","some","purchaseEl","addProductToBasket","toRaw","changeColor","colorIndex","hasIndexInAttributes","altVariant","changeSize","sizeIndex","attr","attribute","xmlns","viewBox","fill","class","_createElementVNode","d","_hoisted_2","_createElementBlock","_hoisted_1","_hoisted_3","script","render","getProducts","products","getBrands","brands","filteredProducts","checkedBrands","filter","brand","toString","brandsPlusAll","title","isShowFilters","toggleShowFilters","getBrandFromId","onSelectBrand"],"sourceRoot":""}